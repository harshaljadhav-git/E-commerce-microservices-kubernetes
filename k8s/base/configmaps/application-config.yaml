apiVersion: v1
kind: ConfigMap
metadata:
  name: app-config
  namespace: ecommerce
data:
  # ============================================
  # DISCOVERY & GATEWAY
  # ============================================
  eureka.uri: "http://discovery-service:8761/eureka"
  spring.profiles.active: "prod"
  
  # ============================================
  # LOGGING CONFIGURATION
  # ============================================
  logging.level.root: "INFO"
  logging.level.com.ecommerce: "DEBUG"
  logging.file.name: ""  # Empty = log to STDOUT for Fluentd
  
  # ============================================
  # DATABASE URLS - PER SERVICE
  # ============================================
  # User Service Database
  user.datasource.url: "jdbc:mysql://mysql-service:3306/userservice?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=UTC"
  
  # Product Service Database
  product.datasource.url: "jdbc:mysql://mysql-service:3306/productservice?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=UTC"
  
  # Order Service Database
  order.datasource.url: "jdbc:mysql://mysql-service:3306/orderservice?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=UTC"
  
  # Inventory Service Database
  inventory.datasource.url: "jdbc:mysql://mysql-service:3306/inventoryservice?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=UTC"
  
  # Payment Service Database
  payment.datasource.url: "jdbc:mysql://mysql-service:3306/paymentservice?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=UTC"
  
  # Shipping Service Database
  shipping.datasource.url: "jdbc:mysql://mysql-service:3306/shippingservice?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=UTC"
  
  # Rating Service Database
  rating.datasource.url: "jdbc:mysql://mysql-service:3306/ratingservice?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=UTC"
  
  # Tax Service Database
  tax.datasource.url: "jdbc:mysql://mysql-service:3306/taxservice?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=UTC"
  
  # Favourite Service Database
  favourite.datasource.url: "jdbc:mysql://mysql-service:3306/favouriteservice?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=UTC"
  
  # ============================================
  # SERVICE-TO-SERVICE COMMUNICATION
  # Matches @ConfigurationProperties(prefix = "ecommerce.services")
  # ============================================
  ecommerce.services.user: "http://user-service:8088"
  ecommerce.services.product: "http://product-service:8086"
  ecommerce.services.order: "http://order-service:8084"
  ecommerce.services.inventory: "http://inventory-service:8082"
  ecommerce.services.payment: "http://payment-service:8085"
  ecommerce.services.shipping: "http://shipping-service:8087"
  ecommerce.services.notification: "http://notification-service:8083"
  ecommerce.services.search: "http://search-service:8093"
  ecommerce.services.promotion: "http://promotion-service:8092"
  ecommerce.services.rating: "http://rating-service:8089"
  ecommerce.services.tax: "http://tax-service:8091"
  ecommerce.services.favourite: "http://favourite-service:8081"
  
  # ============================================
  # INFRASTRUCTURE SERVICES
  # ============================================
  # Kafka
  spring.kafka.bootstrap-servers: "infrastructure-kafka:9092"
  
  # MongoDB (for Notification & Promotion services)
  spring.data.mongodb.uri: "mongodb://admin:password@infrastructure-mongodb:27017/notificationservice?authSource=admin"
  notification.mongodb.uri: "mongodb://admin:password@infrastructure-mongodb:27017/notificationservice?authSource=admin"
  promotion.mongodb.uri: "mongodb://admin:password@infrastructure-mongodb:27017/promotionservice?authSource=admin"
  
  # Redis
  spring.data.redis.host: "infrastructure-redis-master"
  spring.data.redis.port: "6379"
  
  # Elasticsearch/OpenSearch
  spring.elasticsearch.uris: "http://infrastructure-opensearch:9200"
  opensearch.uris: "http://infrastructure-opensearch:9200"
