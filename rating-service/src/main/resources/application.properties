# rating-service/src/main/resources/application.properties

# Server Configuration
server.port=8089

# Application Name
spring.application.name=RATING-SERVICE

# ============================================
# DATABASE CONFIGURATION
# ============================================
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:mysql://localhost:3306/ratingservice?useSSL=false}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:root}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:12042003}
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# JPA Configuration
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect
spring.jpa.properties.hibernate.format_sql=false

# ============================================
# EUREKA CONFIGURATION
# ============================================
eureka.client.serviceUrl.defaultZone=${EUREKA_URI:http://localhost:8761/eureka}
eureka.instance.prefer-ip-address=true
eureka.instance.instance-id=${spring.application.name}:${spring.application.instance_id:${random.value}}

# ============================================
# SERVICE-TO-SERVICE COMMUNICATION
# Must match ConfigMap keys: ecommerce.services.*
# ============================================
ecommerce.services.product=${ECOMMERCE_SERVICES_PRODUCT:http://localhost:8086}
ecommerce.services.customer=${ECOMMERCE_SERVICES_USER:http://localhost:8088}
ecommerce.services.order=${ECOMMERCE_SERVICES_ORDER:http://localhost:8084}

# ============================================
# LOGGING CONFIGURATION
# ============================================
logging.level.root=INFO
logging.level.com.ecommerce=DEBUG
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n
# DO NOT SET logging.file.name - logs to STDOUT for Fluentd capture

# ============================================
# ACTUATOR ENDPOINTS
# ============================================
management.endpoints.web.exposure.include=health,info,metrics,prometheus
management.endpoint.health.show-details=always
management.metrics.export.prometheus.enabled=true